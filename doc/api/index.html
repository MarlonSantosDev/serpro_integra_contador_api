<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, height=device-height, initial-scale=1, user-scalable=no">
  <meta name="description" content="serpro_integra_contador_api API docs, for the Dart programming language.">
  <title>serpro_integra_contador_api - Dart API docs</title>


  
  <link rel="preconnect" href="https://fonts.gstatic.com">
  <link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:ital,wght@0,300;0,400;0,500;0,700;1,400&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0" rel="stylesheet">
  
  <link rel="stylesheet" href="static-assets/github.css?v1">
  <link rel="stylesheet" href="static-assets/styles.css?v1">
  <link rel="icon" href="static-assets/favicon.png?v1">
  
</head>

<body data-base-href="" data-using-base-href="false" class="light-theme">
<div id="overlay-under-drawer"></div>
<header id="title">
  <span id="sidenav-left-toggle" class="material-symbols-outlined" role="button" tabindex="0">menu</span>
  <ol class="breadcrumbs gt-separated dark hidden-xs">
    <li><a href="https://github.com/MarlonSantosDev/serpro_integra_contador_api">serpro_integra_contador_api package</a></li>
  </ol>
  <div class="self-name">serpro_integra_contador_api</div>
  <form class="search navbar-right" role="search">
    <input type="text" id="search-box" autocomplete="off" disabled class="form-control typeahead" placeholder="Loading search...">
  </form>
  <button class="toggle" id="theme-button" title="Toggle between light and dark mode" aria-label="Light and dark mode toggle">
    <span id="dark-theme-button" class="material-symbols-outlined" aria-hidden="true">
      dark_mode
    </span>
    <span id="light-theme-button" class="material-symbols-outlined" aria-hidden="true">
      light_mode
    </span>
  </button>
</header>
<main>
  <div id="dartdoc-main-content" class="main-content">
      
<section class="desc markdown">
  <h1 id="serpro-integra-contador-api---dart-package">SERPRO Integra Contador API - Dart Package</h1>
<p><a href="https://pub.dev/packages/serpro_integra_contador_api"><img src="https://img.shields.io/pub/v/serpro_integra_contador_api.svg" alt="pub package"></a>
<a href="https://opensource.org/licenses/MIT"><img src="https://img.shields.io/badge/License-MIT-yellow.svg" alt="License: MIT"></a></p>
<p>Package Dart para integra√ß√£o completa com a API do SERPRO Integra Contador, fornecendo uma interface type-safe para todos os servi√ßos dispon√≠veis da Receita Federal do Brasil.</p>
<h2 id="-caractersticas-principais">üöÄ Caracter√≠sticas Principais</h2>
<ul>
<li><strong>Autentica√ß√£o autom√°tica</strong> com certificados cliente (mTLS nativo)</li>
<li><strong>Autentica√ß√£o unificada</strong> (OAuth2 + Procurador) via <code>authenticateWithProcurador</code></li>
<li><strong>Assinatura XML digital</strong> completa com RSA-SHA256 para autentica√ß√£o de procurador</li>
<li><strong>Suporte multiplataforma</strong> completo: Android, iOS, Web, Desktop, Windows</li>
<li><strong>Valida√ß√£o autom√°tica</strong> de documentos (CPF/CNPJ) com utilit√°rios centralizados</li>
<li><strong>Tratamento de erros</strong> padronizado e robusto</li>
<li><strong>Suporte completo</strong> a procura√ß√µes eletr√¥nicas</li>
<li><strong>Modelos de dados</strong> type-safe para todas as opera√ß√µes</li>
<li><strong>Flexibilidade de contratante e autor do pedido</strong>: Todos os servi√ßos suportam par√¢metros opcionais <code>contratanteNumero</code> e <code>autorPedidoDadosNumero</code></li>
<li><strong>Documenta√ß√£o completa</strong> com exemplos pr√°ticos e anota√ß√µes <code>@formatador_utils</code> e <code>@validacoes_utils</code></li>
<li><strong>Suporte a m√∫ltiplos ambientes</strong> (trial e produ√ß√£o)</li>
<li><strong>Utilit√°rios centralizados</strong> para valida√ß√µes, formata√ß√£o e manipula√ß√£o de arquivos</li>
<li><strong>Exemplos completos</strong> para todos os servi√ßos com entrada e sa√≠da detalhadas</li>
<li><strong>Cat√°logo de servi√ßos</strong> integrado para mapeamento de c√≥digos funcionais</li>
</ul>
<h2 id="-servios-disponveis">üìã Servi√ßos Dispon√≠veis</h2>
<h3 id="-servios-de-microempreendedor-individual-mei">üè¢ Servi√ßos de Microempreendedor Individual (MEI)</h3>
<ul>
<li><strong>CCMEI</strong>: Certificado da Condi√ß√£o de Microempreendedor Individual</li>
<li><strong>PGMEI</strong>: Pagamento de DAS do MEI</li>
<li><strong>PARCMEI</strong>: Parcelamento do MEI</li>
<li><strong>PARCMEI Especial</strong>: Parcelamento Especial do MEI</li>
<li><strong>PERTMEI</strong>: Pertin√™ncia do MEI</li>
<li><strong>RELPMEI</strong>: Relat√≥rio de Pagamentos do MEI</li>
</ul>
<h3 id="-servios-do-simples-nacional">üèõÔ∏è Servi√ßos do Simples Nacional</h3>
<ul>
<li><strong>PARCSN</strong>: Parcelamento do Simples Nacional</li>
<li><strong>PARCSN Especial</strong>: Parcelamento Especial do Simples Nacional</li>
<li><strong>PERTSN</strong>: Pertin√™ncia do Simples Nacional</li>
<li><strong>RELPSN</strong>: Relat√≥rio de Pagamentos do Simples Nacional</li>
</ul>
<h3 id="-servios-tributrios-gerais">üìä Servi√ßos Tribut√°rios Gerais</h3>
<ul>
<li><strong>DCTFWeb</strong>: Declara√ß√£o de D√©bitos e Cr√©ditos Tribut√°rios Federais</li>
<li><strong>DEFIS</strong>: Declara√ß√£o de Informa√ß√µes Socioecon√¥micas e Fiscais</li>
<li><strong>SICALC</strong>: Sistema de C√°lculo de Impostos</li>
<li><strong>SITFIS</strong>: Sistema de Informa√ß√µes Tribut√°rias Fiscais</li>
<li><strong>MIT</strong>: M√≥dulo de Inclus√£o de Tributos</li>
<li><strong>PGDASD</strong>: Pagamento de DAS por D√©bito Direto Autorizado (inclui m√©todos compostos para opera√ß√µes combinadas)</li>
</ul>
<h3 id="-servios-de-comunicao">üì¨ Servi√ßos de Comunica√ß√£o</h3>
<ul>
<li><strong>Caixa Postal</strong>: Consulta de mensagens da Receita Federal</li>
<li><strong>Eventos de Atualiza√ß√£o</strong>: Monitoramento de atualiza√ß√µes em sistemas</li>
</ul>
<h3 id="-servios-de-autenticao-e-procurao">üîê Servi√ßos de Autentica√ß√£o e Procura√ß√£o</h3>
<ul>
<li><strong>Autentica Procurador</strong>: Gest√£o de autentica√ß√£o de procuradores</li>
<li><strong>Procura√ß√µes</strong>: Gest√£o de procura√ß√µes eletr√¥nicas</li>
</ul>
<h3 id="-servios-especiais">üè† Servi√ßos Especiais</h3>
<ul>
<li><strong>DTE</strong>: Domic√≠lio Tribut√°rio Eletr√¥nico</li>
<li><strong>PagtoWeb</strong>: Consulta de pagamentos e emiss√£o de comprovantes</li>
<li><strong>Regime Apura√ß√£o</strong>: Gest√£o do regime de apura√ß√£o (Compet√™ncia/Caixa) do Simples Nacional</li>
</ul>
<h2 id="-instalao">üîß Instala√ß√£o</h2>
<p>Adicione ao seu <code>pubspec.yaml</code>:</p>
<pre class="language-yaml"><code class="language-yaml">dependencies:
  serpro_integra_contador_api: ^2.0.8
</code></pre>
<p>Execute:</p>
<pre class="language-bash"><code class="language-bash">flutter pub get
</code></pre>
<h2 id="-uso-bsico">üí° Uso B√°sico</h2>
<h3 id="autenticao-oauth2">Autentica√ß√£o OAuth2</h3>
<pre class="language-dart"><code class="language-dart">import 'package:serpro_integra_contador_api/serpro_integra_contador_api.dart';

void main() async {
  // Inicializar cliente da API
  final apiClient = ApiClient();

  // Autenticar com certificados
  await apiClient.authenticate(
    consumerKey: 'seu_consumer_key',
    consumerSecret: 'seu_consumer_secret',
    certificadoDigitalPath: 'caminho/para/certificado.p12',
    senhaCertificado: 'senha_do_certificado',
    contratanteNumero: '12345678000100',
    autorPedidoDadosNumero: '12345678000100',
    ambiente: 'trial', // ou 'producao'
  );
}
</code></pre>
<h3 id="autenticao-unificada-oauth2--procurador">Autentica√ß√£o unificada (OAuth2 + Procurador)</h3>
<p>Use um √∫nico passo para obter o token OAuth2 e o token de procurador. Se n√£o precisar de procura√ß√£o, basta omitir os par√¢metros do procurador e o m√©todo executa apenas a autentica√ß√£o b√°sica.</p>
<pre class="language-dart"><code class="language-dart">import 'package:serpro_integra_contador_api/serpro_integra_contador_api.dart';

void main() async {
  final apiClient = ApiClient();

  await apiClient.authenticateWithProcurador(
    consumerKey: 'seu_consumer_key',
    consumerSecret: 'seu_consumer_secret',
    contratanteNumero: '12345678000100',
    autorPedidoDadosNumero: '12345678000100',
    certificadoDigitalPath: 'contratante.pfx',
    senhaCertificado: 'senha_contratante',
    ambiente: 'producao', // ou 'trial'
    // Dados do procurador (opcionais, obrigat√≥rios para gerar token de procurador)
    contratanteNome: 'Minha Empresa de Contabilidade',
    autorNome: 'Nome do Procurador',
    contribuinteNumero: '12345678000100',
    autorNumero: '12345678901',
    certificadoProcuradorPath: 'procurador.pfx',
    certificadoProcuradorPassword: 'senha_procurador',
  );

  // Token do procurador fica dispon√≠vel automaticamente no ApiClient
  print('Token procurador ativo: ${apiClient.hasProcuradorToken}');
}
</code></pre>
<h3 id="usando-servios-com-valores-padro">Usando Servi√ßos com Valores Padr√£o</h3>
<pre class="language-dart"><code class="language-dart">// Usar valores padr√£o da autentica√ß√£o
final ccmeiService = CcmeiService(apiClient);
final response = await ccmeiService.emitirCcmei('12345678000100');
print('CCMEI emitido: ${response.dados.pdf.isNotEmpty}');
</code></pre>
<h3 id="usando-servios-com-valores-especficos">Usando Servi√ßos com Valores Espec√≠ficos</h3>
<pre class="language-dart"><code class="language-dart">// Usar valores espec√≠ficos para esta requisi√ß√£o
final sicalcService = SicalcService(apiClient);
final darfResponse = await sicalcService.consolidarEGerarDarf(
  contribuinteNumero: '12345678000100',
  contratanteNumero: '98765432000100', // Valor espec√≠fico
  autorPedidoDadosNumero: '11122233344', // Valor espec√≠fico
  uf: 'SP',
  municipio: 3550308,
  codigoReceita: 190,
  codigoReceitaExtensao: 1,
  dataPA: '2024-01',
  vencimento: '2024-02-15',
  valorImposto: 1000.00,
  dataConsolidacao: '2024-01-15',
);
</code></pre>
<h2 id="-flexibilidade-de-contratante-e-autor-do-pedido">üîÑ Flexibilidade de Contratante e Autor do Pedido</h2>
<p>Todos os servi√ßos da biblioteca suportam par√¢metros opcionais <code>contratanteNumero</code> e <code>autorPedidoDadosNumero</code>. Isso permite:</p>
<h3 id="cenrios-de-uso">Cen√°rios de Uso</h3>
<ol>
<li><strong>Valores Padr√£o</strong>: Quando n√£o especificados, usa os valores definidos na autentica√ß√£o</li>
<li><strong>Valores Espec√≠ficos</strong>: Permite usar diferentes contratantes ou autores para requisi√ß√µes espec√≠ficas</li>
<li><strong>Contextos M√∫ltiplos</strong>: Ideal para sistemas que atendem m√∫ltiplos clientes ou contextos</li>
</ol>
<h3 id="exemplos-prticos">Exemplos Pr√°ticos</h3>
<pre class="language-dart"><code class="language-dart">// Consulta DTE com valores padr√£o
final dteService = DteService(apiClient);
final dteResponse = await dteService.obterIndicadorDte('12345678000100');

// Consulta DTE com contratante espec√≠fico
final dteResponse2 = await dteService.obterIndicadorDte(
  '12345678000100',
  contratanteNumero: '98765432000100',
  autorPedidoDadosNumero: '11122233344',
);

// Caixa Postal com autor espec√≠fico
final caixaPostalService = CaixaPostalService(apiClient);
final mensagens = await caixaPostalService.listarTodasMensagens(
  '12345678000100',
  contratanteNumero: '98765432000100',
);
</code></pre>
<h2 id="-utilitrios-centralizados">üõ†Ô∏è Utilit√°rios Centralizados</h2>
<h3 id="validaes-utilitrias">Valida√ß√µes Utilit√°rias</h3>
<pre class="language-dart"><code class="language-dart">import 'package:serpro_integra_contador_api/serpro_integra_contador_api.dart';

// Validar CNPJ
final isValidCnpj = ValidacoesUtils.isValidCnpj('12345678000195');

// Validar CPF
final isValidCpf = ValidacoesUtils.isValidCpf('12345678901');

// Validar n√∫mero de parcelamento
final error = ValidacoesUtils.validarNumeroParcelamento(123456);
if (error != null) {
  print('Erro: $error');
}

// Validar ano/m√™s
final errorAnoMes = ValidacoesUtils.validarAnoMes(202401);
if (errorAnoMes != null) {
  print('Erro: $errorAnoMes');
}

// Validar valor monet√°rio
final errorValor = ValidacoesUtils.validarValorMonetario(1000.50);
if (errorValor != null) {
  print('Erro: $errorValor');
}
</code></pre>
<h3 id="formatao-utilitria">Formata√ß√£o Utilit√°ria</h3>
<pre class="language-dart"><code class="language-dart">// Formatar CNPJ
final cnpjFormatado = FormatadorUtils.formatCnpj('12345678000195');
// Resultado: 12.345.678/0001-95

// Formatar CPF
final cpfFormatado = FormatadorUtils.formatCpf('12345678901');
// Resultado: 123.456.789-01

// Formatar moeda
final valorFormatado = FormatadorUtils.formatCurrency(1234.56);
// Resultado: R$ 1.234,56

// Formatar data
final dataFormatada = FormatadorUtils.formatDateFromString('20240115');
// Resultado: 15/01/2024

// Formatar per√≠odo
final periodoFormatado = FormatadorUtils.formatPeriodFromString('202401');
// Resultado: Janeiro/2024
</code></pre>
<h3 id="utilitrios-de-arquivo">Utilit√°rios de Arquivo</h3>
<pre class="language-dart"><code class="language-dart">// Salvar PDF em base64 no sistema de arquivos
final sucesso = await ArquivoUtils.salvarArquivo(
  pdfBase64,
  'ccmei_certificado.pdf'
);
// Resultado: true (arquivo salvo em arquivos/pdf/ccmei_certificado.pdf)
</code></pre>
<h3 id="catlogo-de-servios">Cat√°logo de Servi√ßos</h3>
<pre class="language-dart"><code class="language-dart">// Obter c√≥digo funcional de um servi√ßo
final codigoFuncional = CatalogoServicosUtils.getFunctionCode('TRANSDECLARACAO11');
// Resultado: '01'

// Verificar se servi√ßo existe no cat√°logo
final existe = CatalogoServicosUtils.isServiceInCatalog('TRANSDECLARACAO11');
// Resultado: true

// Obter todos os servi√ßos dispon√≠veis
final servicos = CatalogoServicosUtils.getAllServices();
// Resultado: ['TRANSDECLARACAO11', 'GERARDAS12', ...]
</code></pre>
<h2 id="-documentao-completa">üìö Documenta√ß√£o Completa</h2>
<h3 id="documentao-dos-servios">Documenta√ß√£o dos Servi√ßos</h3>
<ul>
<li><a href="doc/autenticaprocurador_service.md">Autentica Procurador Service</a> - Gest√£o de autentica√ß√£o de procuradores</li>
<li><a href="doc/caixa_postal_service.md">Caixa Postal Service</a> - Consulta de mensagens da RFB</li>
<li><a href="doc/ccmei_service.md">CCMEI Service</a> - Certificado da Condi√ß√£o de MEI</li>
<li><a href="doc/dctfweb_service.md">DCTFWeb Service</a> - Declara√ß√£o de D√©bitos e Cr√©ditos Tribut√°rios</li>
<li><a href="doc/defis_service.md">DEFIS Service</a> - Declara√ß√£o de Informa√ß√µes Socioecon√¥micas e Fiscais</li>
<li><a href="doc/dte_service.md">DTE Service</a> - Domic√≠lio Tribut√°rio Eletr√¥nico</li>
<li><a href="doc/eventos_atualizacao_service.md">Eventos Atualiza√ß√£o Service</a> - Monitoramento de atualiza√ß√µes</li>
<li><a href="doc/mit_service.md">MIT Service</a> - M√≥dulo de Inclus√£o de Tributos</li>
<li><a href="doc/pagtoweb_service.md">PagtoWeb Service</a> - Consulta de pagamentos</li>
<li><a href="doc/parcmei_service.md">PARCMEI Service</a> - Parcelamento do MEI</li>
<li><a href="doc/parcmei_especial_service.md">PARCMEI Especial Service</a> - Parcelamento Especial do MEI</li>
<li><a href="doc/parcsn_service.md">PARCSN Service</a> - Parcelamento do Simples Nacional</li>
<li><a href="doc/parcsn_especial_service.md">PARCSN Especial Service</a> - Parcelamento Especial do Simples Nacional</li>
<li><a href="doc/pertmei_service.md">PERTMEI Service</a> - Pertin√™ncia do MEI</li>
<li><a href="doc/pertsn_service.md">PERTSN Service</a> - Pertin√™ncia do Simples Nacional</li>
<li><a href="doc/pgdasd_service.md">PGDASD Service</a> - Pagamento de DAS por D√©bito Direto Autorizado (com m√©todos compostos)</li>
<li><a href="doc/pgmei_service.md">PGMEI Service</a> - Pagamento de DAS do MEI</li>
<li><a href="doc/procuracoes_service.md">Procura√ß√µes Service</a> - Gest√£o de procura√ß√µes eletr√¥nicas</li>
<li><a href="doc/regime_apuracao_service.md">Regime Apura√ß√£o Service</a> - Gest√£o do regime de apura√ß√£o do Simples Nacional</li>
<li><a href="doc/relpmei_service.md">RELPMEI Service</a> - Relat√≥rio de Pagamentos do MEI</li>
<li><a href="doc/relpsn_service.md">RELPSN Service</a> - Relat√≥rio de Pagamentos do Simples Nacional</li>
<li><a href="doc/sicalc_service.md">SICALC Service</a> - Sistema de C√°lculo de Impostos</li>
<li><a href="doc/sitfis_service.md">SITFIS Service</a> - Sistema de Informa√ß√µes Tribut√°rias Fiscais</li>
</ul>
<h3 id="guias-de-incio-rpido">Guias de In√≠cio R√°pido</h3>
<h4 id="1-primeiro-uso---consultar-ccmei">1. Primeiro Uso - Consultar CCMEI</h4>
<pre class="language-dart"><code class="language-dart">import 'package:serpro_integra_contador_api/serpro_integra_contador_api.dart';

void main() async {
  // Configurar cliente
  final apiClient = ApiClient();
  await apiClient.authenticate(
    consumerKey: 'seu_consumer_key',
    consumerSecret: 'seu_consumer_secret',
    certificadoDigitalPath: 'caminho/para/certificado.p12',
    senhaCertificado: 'senha_do_certificado',
    ambiente: 'trial',
  );

  // Consultar CCMEI
  final ccmeiService = CcmeiService(apiClient);
  final response = await ccmeiService.emitirCcmei('00000000000000');
  
  if (response.sucesso) {
    print('CCMEI emitido com sucesso!');
    print('N√∫mero: ${response.dados?.numeroCertificado}');
    
    // Salvar PDF
    if (response.dados?.pdf.isNotEmpty == true) {
      final sucessoSalvamento = await ArquivoUtils.salvarArquivo(
        response.dados!.pdf,
        'ccmei_${DateTime.now().millisecondsSinceEpoch}.pdf',
      );
      print('PDF salvo: ${sucessoSalvamento ? 'Sim' : 'N√£o'}');
    }
  } else {
    print('Erro: ${response.mensagemErro}');
  }
}
</code></pre>
<h4 id="2-gerar-darf-com-sicalc">2. Gerar DARF com SICALC</h4>
<pre class="language-dart"><code class="language-dart">import 'package:serpro_integra_contador_api/serpro_integra_contador_api.dart';

void main() async {
  // Configurar cliente
  final apiClient = ApiClient();
  await apiClient.authenticate(
    consumerKey: 'seu_consumer_key',
    consumerSecret: 'seu_consumer_secret',
    certificadoDigitalPath: 'caminho/para/certificado.p12',
    senhaCertificado: 'senha_do_certificado',
    ambiente: 'trial',
  );

  // Gerar DARF
  final sicalcService = SicalcService(apiClient);
  final response = await sicalcService.gerarDarfPessoaFisica(
    contribuinteNumero: '00000000000',
    uf: 'SP',
    municipio: 3550308,
    dataPA: '20240101',
    vencimento: '20240215',
    valorImposto: 1000.0,
    dataConsolidacao: '20240215',
  );
  
  if (response.sucesso) {
    print('DARF gerado com sucesso!');
    print('N√∫mero: ${response.dados?.numeroDocumento}');
    print('Valor total: R\$ ${response.dados?.valorTotal}');
  }
}
</code></pre>
<h4 id="3-consultar-caixa-postal">3. Consultar Caixa Postal</h4>
<pre class="language-dart"><code class="language-dart">import 'package:serpro_integra_contador_api/serpro_integra_contador_api.dart';

void main() async {
  // Configurar cliente
  final apiClient = ApiClient();
  await apiClient.authenticate(
    consumerKey: 'seu_consumer_key',
    consumerSecret: 'seu_consumer_secret',
    certificadoDigitalPath: 'caminho/para/certificado.p12',
    senhaCertificado: 'senha_do_certificado',
    ambiente: 'trial',
  );

  // Consultar caixa postal
  final caixaPostalService = CaixaPostalService(apiClient);
  final response = await caixaPostalService.listarTodasMensagens('00000000000000');
  
  if (response.sucesso) {
    print('Mensagens encontradas: ${response.dadosParsed?.mensagens.length ?? 0}');
    for (final mensagem in response.dadosParsed?.mensagens ?? []) {
      print('Assunto: ${mensagem.assunto}');
      print('Data: ${mensagem.dataEnvio}');
    }
  }
}
</code></pre>
<h4 id="4-usar-mtodos-compostos-do-pgdasd">4. Usar M√©todos Compostos do PGDASD</h4>
<p>Os m√©todos compostos combinam m√∫ltiplas opera√ß√µes em uma √∫nica chamada, reduzindo o n√∫mero de requisi√ß√µes √† API:</p>
<pre class="language-dart"><code class="language-dart">import 'package:serpro_integra_contador_api/serpro_integra_contador_api.dart';

void main() async {
  // Configurar cliente
  final apiClient = ApiClient();
  await apiClient.authenticate(
    consumerKey: 'seu_consumer_key',
    consumerSecret: 'seu_consumer_secret',
    certificadoDigitalPath: 'caminho/para/certificado.p12',
    senhaCertificado: 'senha_do_certificado',
    ambiente: 'trial',
  );

  final pgdasdService = PgdasdService(apiClient);
  
  // Exemplo 1: Consultar √∫ltima declara√ß√£o com verifica√ß√£o de pagamento
  final consultaResponse = await pgdasdService.consultarUltimaDeclaracaoComPagamento(
    contribuinteNumero: '00000000000100',
    periodoApuracao: '202504',
  );
  
  if (consultaResponse.sucesso) {
    print('Declara√ß√£o: ${consultaResponse.dados?.numeroDeclaracao}');
    print('DAS Pago: ${consultaResponse.dasPago ? "Sim" : "N√£o"}');
  }
  
  // Exemplo 2: Entregar declara√ß√£o e gerar DAS automaticamente
  final declaracao = Declaracao(
    tipoDeclaracao: 1,
    receitaPaCompetenciaInterno: 50000.00,
    receitaPaCompetenciaExterno: 10000.00,
    estabelecimentos: [
      // ... estrutura da declara√ß√£o
    ],
  );
  
  final entregaResponse = await pgdasdService.entregarDeclaracaoComDas(
    contribuinteNumero: '00000000000100',
    request: EntregarDeclaracaoRequest(
      cnpjCompleto: '00000000000100',
      pa: 202504,
      indicadorTransmissao: true,
      indicadorComparacao: true,
      declaracao: declaracao,
      valoresParaComparacao: [],
    ),
  );
  
  if (entregaResponse.sucesso) {
    print('‚úÖ Declara√ß√£o e DAS gerados!');
    print('ID: ${entregaResponse.dadosDeclaracao?.idDeclaracao}');
    print('DAS: ${entregaResponse.dadosDas?.first.detalhamento.numeroDocumento}');
  } else if (entregaResponse.declaracaoEntregue) {
    print('‚ö†Ô∏è Declara√ß√£o OK, mas DAS falhou');
  }
}
</code></pre>
<h2 id="-configurao-avanada">üõ†Ô∏è Configura√ß√£o Avan√ßada</h2>
<h3 id="configurao-de-ambiente">Configura√ß√£o de Ambiente</h3>
<h4 id="desktopmobile-android-ios-windows-linux-macos">Desktop/Mobile (Android, iOS, Windows, Linux, macOS)</h4>
<pre class="language-dart"><code class="language-dart">// Ambiente Trial (desenvolvimento)
final apiClient = ApiClient();

await apiClient.authenticate(
  consumerKey: 'seu_consumer_key',
  consumerSecret: 'seu_consumer_secret',
  certificadoDigitalPath: 'caminho/para/certificado.p12',
  senhaCertificado: 'senha_do_certificado',
  ambiente: 'trial', // Usa URL de trial
);

// Ambiente Produ√ß√£o
await apiClient.authenticate(
  consumerKey: 'seu_consumer_key',
  consumerSecret: 'seu_consumer_secret',
  certificadoDigitalPath: 'caminho/para/certificado.p12',
  senhaCertificado: 'senha_do_certificado',
  ambiente: 'producao', // Usa URL de produ√ß√£o
);
</code></pre>
<h4 id="flutter-web">Flutter Web</h4>
<p>Para Flutter Web, √© necess√°rio usar um servidor proxy (Cloud Functions ou servidor pr√≥prio) para autentica√ß√£o OAuth2, pois o navegador n√£o suporta mTLS nativo.</p>
<pre class="language-dart"><code class="language-dart">// Configurar servidores para Web
final apiClient = ApiClient();
apiClient.setServidores(
  urlAutenticacao: 'https://servidor.com.br',
  urlAutenticacaoProcurado: 'https://servidor.com.br',
  urlProxy: 'https://servidor.com.br',
);

// Autentica√ß√£o na Web
await apiClient.authenticate(
  consumerKey: 'seu_consumer_key',
  consumerSecret: 'seu_consumer_secret',
  contratanteNumero: '12345678000100',
  autorPedidoDadosNumero: '12345678000100',
  certificadoDigitalBase64: certBase64, // Certificado em Base64
  senhaCertificado: 'senha_do_certificado',
  ambiente: 'producao',
  // Opcional: usar secrets do Firebase
  certSecretName: 'certificado_serpro',
  certPasswordSecretName: 'senha_certificado',
  firebaseToken: await FirebaseAuth.instance.currentUser?.getIdToken(),
);
</code></pre>
<p><strong>Nota</strong>: A assinatura XML digital funciona nativamente na Web (pure Dart), apenas a autentica√ß√£o OAuth2 requer o servidor proxy.</p>
<h2 id="-segurana">üîí Seguran√ßa</h2>
<h3 id="autenticao-mtls-nativa">Autentica√ß√£o mTLS Nativa</h3>
<p>O package utiliza autentica√ß√£o mTLS nativa do Dart atrav√©s da classe <code>SecurityContext</code>, garantindo:</p>
<ul>
<li><strong>Compatibilidade multiplataforma</strong>: Android, iOS, Desktop e Windows</li>
<li><strong>Flutter Web</strong>: Requer servidor proxy (Cloud Functions ou servidor pr√≥prio) para OAuth2</li>
<li><strong>Suporte a algoritmos legados</strong>: RC2-40-CBC, 3DES, etc. (comuns em certificados antigos)</li>
<li><strong>Processamento nativo</strong>: Sem depend√™ncias externas para criptografia (Desktop/Mobile)</li>
<li><strong>Valida√ß√£o autom√°tica</strong>: Certificados Base64 s√£o processados corretamente</li>
<li><strong>Detec√ß√£o autom√°tica de plataforma</strong>: O package detecta automaticamente se est√° rodando em Web ou Desktop/Mobile</li>
</ul>
<h3 id="assinatura-xml-digital">Assinatura XML Digital</h3>
<p>Implementa√ß√£o completa de XMLDSig (W3C) para autentica√ß√£o de procurador:</p>
<ul>
<li><strong>RSA-SHA256</strong>: Algoritmo de assinatura digital padr√£o</li>
<li><strong>Certificados ICP-Brasil</strong>: Suporte completo a e-CPF e e-CNPJ</li>
<li><strong>Valida√ß√£o autom√°tica</strong>: Verifica√ß√£o de validade e cadeia de certifica√ß√£o</li>
<li><strong>Modo Trial</strong>: Assinatura simulada para desenvolvimento sem certificado</li>
</ul>
<h3 id="certificados-digitais">Certificados Digitais</h3>
<p>O package suporta certificados ICP-Brasil nos formatos:</p>
<ul>
<li><strong>A1</strong>: Arquivo .p12/.pfx</li>
<li><strong>A3</strong>: Token/cart√£o inteligente (atrav√©s do sistema operacional)</li>
<li><strong>PEM</strong>: Certificados em formato texto (PKCS#1 e PKCS#8)</li>
<li><strong>Base64</strong>: Certificados codificados para aplica√ß√µes Web/Mobile</li>
</ul>
<h3 id="validao-de-documentos">Valida√ß√£o de Documentos</h3>
<pre class="language-dart"><code class="language-dart">// Validar CNPJ
final isValidCnpj = ValidacoesUtils.isValidCnpj('12345678000195');

// Validar CPF
final isValidCpf = ValidacoesUtils.isValidCpf('12345678901');

// Formatar documento
final cnpjFormatado = FormatadorUtils.formatCnpj('12345678000195');
// Resultado: 12.345.678/0001-95
</code></pre>
<h2 id="-tratamento-de-erros">üìä Tratamento de Erros</h2>
<h3 id="estrutura-padro-de-resposta">Estrutura Padr√£o de Resposta</h3>
<pre class="language-dart"><code class="language-dart">class ApiResponse&lt;T&gt; {
  final bool sucesso;
  final String? mensagemErro;
  final T? dados;
  final List&lt;MensagemNegocio&gt; mensagens;
}
</code></pre>
<h3 id="tratamento-de-erros-comum">Tratamento de Erros Comum</h3>
<pre class="language-dart"><code class="language-dart">try {
  final response = await service.metodoExemplo();
  
  if (response.sucesso) {
    // Processar dados
    print('Sucesso: ${response.dados}');
  } else {
    // Tratar erro
    print('Erro: ${response.mensagemErro}');
    
    // Analisar mensagens espec√≠ficas
    for (final mensagem in response.mensagens) {
      if (mensagem.isErro) {
        print('C√≥digo: ${mensagem.codigo}');
        print('Texto: ${mensagem.texto}');
      }
    }
  }
} catch (e) {
  print('Exce√ß√£o: $e');
}
</code></pre>
<h2 id="-testes">üß™ Testes</h2>
<h3 id="dados-de-teste">Dados de Teste</h3>
<p>Para desenvolvimento e testes, utilize os seguintes dados:</p>
<pre class="language-dart"><code class="language-dart">// CNPJs/CPFs de teste (sempre usar zeros)
const cnpjTeste = '00000000000000';
const cpfTeste = '00000000000';

// Dados de teste comuns
const ufTeste = 'SP';
const municipioTeste = 3550308; // S√£o Paulo
const codigoReceitaTeste = 190; // IRPF
</code></pre>
<h3 id="exemplo-de-teste">Exemplo de Teste</h3>
<pre class="language-dart"><code class="language-dart">import 'package:flutter_test/flutter_test.dart';
import 'package:serpro_integra_contador_api/serpro_integra_contador_api.dart';

void main() {
  group('CCMEI Service Tests', () {
    late ApiClient apiClient;
    late CcmeiService ccmeiService;

    setUp(() {
      apiClient = ApiClient();
      ccmeiService = CcmeiService(apiClient);
    });

    test('deve emitir CCMEI com sucesso', () async {
      // Arrange
      const cnpj = '00000000000000';
      
      // Act
      final response = await ccmeiService.emitirCcmei(cnpj);
      
      // Assert
      expect(response.sucesso, isTrue);
      expect(response.dados, isNotNull);
    });
  });
}
</code></pre>
<h2 id="-performance-e-otimizao">üöÄ Performance e Otimiza√ß√£o</h2>
<h3 id="gerenciamento-de-tokens">Gerenciamento de tokens</h3>
<pre class="language-dart"><code class="language-dart">// Status do token OAuth2 (expira√ß√£o, ambiente, mTLS)
print(apiClient.authTokenInfo);

// Limpar cache em mem√≥ria do token de procurador ao trocar de usu√°rio
AutenticaProcuradorService.limparCache();
</code></pre>
<h3 id="requisies-em-lote">Requisi√ß√µes em Lote</h3>
<pre class="language-dart"><code class="language-dart">// Consultar m√∫ltiplos contribuintes
final cpfs = ['12345678901', '98765432109', '11122233344'];
final eventos = await eventosAtualizacaoService.solicitarEObterEventosPF(
  cpfs: cpfs,
  evento: TipoEvento.dctfweb,
);
</code></pre>
<h2 id="-troubleshooting">üîß Troubleshooting</h2>
<h3 id="problemas-comuns">Problemas Comuns</h3>
<h4 id="1-erro-de-certificado">1. Erro de Certificado</h4>
<pre class="language-dart"><code>Erro: Certificado digital inv√°lido
</code></pre>
<p><strong>Solu√ß√£o</strong>: Verificar se o certificado √© v√°lido ICP-Brasil e se a senha est√° correta.</p>
<h4 id="2-erro-de-autenticao">2. Erro de Autentica√ß√£o</h4>
<pre class="language-dart"><code>Erro: Consumer Key/Secret inv√°lidos
</code></pre>
<p><strong>Solu√ß√£o</strong>: Verificar as credenciais no Portal do Cliente SERPRO.</p>
<h4 id="3-erro-de-timeout">3. Erro de Timeout</h4>
<pre class="language-dart"><code>Erro: Timeout na requisi√ß√£o
</code></pre>
<p><strong>Solu√ß√£o</strong>: Verificar a conex√£o de rede.</p>
<h2 id="-contribuio">ü§ù Contribui√ß√£o</h2>
<p>Contribui√ß√µes s√£o bem-vindas!</p>
<h3 id="padres-de-cdigo">Padr√µes de C√≥digo</h3>
<ul>
<li>Siga as conven√ß√µes do Dart/Flutter</li>
<li>Adicione testes para novas funcionalidades</li>
<li>Atualize a documenta√ß√£o</li>
<li>Use commits sem√¢nticos</li>
</ul>
<h2 id="-licena">üìÑ Licen√ßa</h2>
<p>Este projeto est√° licenciado sob a licen√ßa MIT - veja o arquivo <a href="LICENSE">LICENSE</a> para detalhes.</p>
<h2 id="-suporte">üÜò Suporte</h2>
<h3 id="documentao-oficial">Documenta√ß√£o Oficial</h3>
<ul>
<li><a href="https://apicenter.estaleiro.serpro.gov.br/documentacao/api-integra-contador/">SERPRO Integra Contador API</a></li>
<li><a href="https://cliente.serpro.gov.br">Portal do Cliente SERPRO</a></li>
</ul>
<h3 id="comunidade">Comunidade</h3>
<ul>
<li><a href="https://github.com/MarlonSantosDev/serpro_integra_contador_api/issues">Issues do GitHub</a></li>
<li><a href="https://github.com/MarlonSantosDev/serpro_integra_contador_api/discussions">Discuss√µes</a></li>
</ul>
<h3 id="contato">Contato</h3>
<p>Para suporte t√©cnico espec√≠fico:</p>
<ul>
<li>Email: <a href="mailto:marlon-20-12@hotmail.com">marlon-20-12@hotmail.com</a></li>
</ul>
<hr>
<p><strong>Desenvolvido com ‚ù§Ô∏è para a comunidade brasileira de desenvolvedores</strong></p>
</section>


      <section class="summary">
          <h2>Libraries</h2>
        <dl>
          <dt id="serpro_integra_contador_api">
  <span class="name"><a href="serpro_integra_contador_api/">serpro_integra_contador_api</a></span> 

</dt>
<dd>Package Dart para integra√ß√£o com a API do SERPRO Integra Contador
</dd>

        </dl>
      </section>
  </div> <!-- /.main-content -->
  <div id="dartdoc-sidebar-left" class="sidebar sidebar-offcanvas-left">
    <!-- The search input and breadcrumbs below are only responsively visible at low resolutions. -->
<header id="header-search-sidebar" class="hidden-l">
  <form class="search-sidebar" role="search">
    <input type="text" id="search-sidebar" autocomplete="off" disabled class="form-control typeahead" placeholder="Loading search...">
  </form>
</header>
<ol class="breadcrumbs gt-separated dark hidden-l" id="sidebar-nav">
    <li><a href="https://github.com/MarlonSantosDev/serpro_integra_contador_api">serpro_integra_contador_api package</a></li>
</ol>

    <h5 class="hidden-xs"><span class="package-name">serpro_integra_contador_api</span> <span class="package-kind">package</span></h5>
    <ol>
      <li class="section-title">Libraries</li>
      <li><a href="serpro_integra_contador_api/">serpro_integra_contador_api</a></li>
</ol>

  </div>
  <div id="dartdoc-sidebar-right" class="sidebar sidebar-offcanvas-right">
  </div>
</main>
<footer>
  <span class="no-break">
    serpro_integra_contador_api
      2.0.9
  </span>
  
</footer>


<script src="static-assets/highlight.pack.js?v1"></script>
<script src="static-assets/docs.dart.js"></script>

</body>
</html>

